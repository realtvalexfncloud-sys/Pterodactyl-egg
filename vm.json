{
  "meta": { "version": "PTDL_v2" },
  "exported_at": "2025-10-30T00:00:00+00:00",
  "name": "VM (QEMU/KVM) – Ubuntu/Debian Cloud",
  "author": "realtvalexfncloud@gmail.com",
  "description": "Linux-VMs via QEMU/KVM aus offiziellen Cloud-Images (Ubuntu/Debian) mit Cloud-Init. OS-/Versionsauswahl, SSH/Port-Forwards, sauberes Stop/Kill.",
  "features": null,
  "docker_images": {
    "GHCR (empfohlen)": "ghcr.io/realtvalexfncloud-sys/qemu-cloud:latest",
    "Docker Hub (Fallback)": "docker.io/realtvalexfncloud-sys/qemu-cloud:latest"
  },
  "file_denylist": [],
  "startup": "/bin/bash /home/container/start.sh",
  "config": {
    "files": "{}",
    "startup": "{\n  \"done\": \"VM_READY\"\n}",
    "logs": "{\n  \"custom\": false\n}",
    "stop": "/bin/bash /home/container/stop.sh"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\nset -euo pipefail\nREPO_RAW=\"${REPO_RAW:-https://raw.githubusercontent.com/realtvalexfncloud-sys/Pterodactyl-egg/main}\"\nmkdir -p /mnt/server\ncurl -fsSL \"$REPO_RAW/scripts/start.sh\" -o /mnt/server/start.sh\ncurl -fsSL \"$REPO_RAW/scripts/stop.sh\"  -o /mnt/server/stop.sh\ncurl -fsSL \"$REPO_RAW/scripts/vm.sh\"    -o /mnt/server/vm.sh || true\ncurl -fsSL \"$REPO_RAW/scripts/banner.txt\" -o /mnt/server/banner.txt || true\nchmod +x /mnt/server/*.sh\nif [ -s /mnt/server/banner.txt ]; then echo; cat /mnt/server/banner.txt; echo; fi\necho \"Installation abgeschlossen ✅\"\necho \"Install ok\"\n",
      "container": "ghcr.io/parkervcp/installers:debian",
      "entrypoint": "bash",
      "script_container": true
    }
  },
  "variables": [
    {
      "name": "REPO_RAW",
      "description": "Quelle für Skripte (raw.githubusercontent.com)",
      "env_variable": "REPO_RAW",
      "default_value": "https://raw.githubusercontent.com/realtvalexfncloud-sys/Pterodactyl-egg/main",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:255"
    },
    {
      "name": "OS",
      "description": "Betriebssystem (Cloud-Image)",
      "env_variable": "OS_FAMILY",
      "default_value": "ubuntu",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:ubuntu,debian"
    },
    {
      "name": "OS_VERSION",
      "description": "Version: ubuntu (20.04,22.04,24.04) / debian (11,12)",
      "env_variable": "OS_VERSION",
      "default_value": "22.04",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|regex:/^(20\\.04|22\\.04|24\\.04|11|12)$/"
    },
    {
      "name": "DISK_SIZE_GB",
      "description": "VM-Disk in GB",
      "env_variable": "DISK_SIZE_GB",
      "default_value": "20",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|min:10|max:1000"
    },
    {
      "name": "RAM_MB",
      "description": "RAM für die VM (achte darauf, im Panel genug Memory zuzuweisen)",
      "env_variable": "RAM_MB",
      "default_value": "2048",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|min:512|max:131072"
    },
    {
      "name": "CPU_CORES",
      "description": "vCPU (SMP-Kerne) für die VM",
      "env_variable": "CPU_CORES",
      "default_value": "2",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|min:1|max:32"
    },
    {
      "name": "ENABLE_KVM",
      "description": "KVM nutzen (Host muss /dev/kvm durchreichen, Container privilegiert)",
      "env_variable": "ENABLE_KVM",
      "default_value": "1",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:0,1"
    },
    {
      "name": "VM_USER",
      "description": "User in der VM (Cloud-Init)",
      "env_variable": "VM_USER",
      "default_value": "user",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|alpha_dash"
    },
    {
      "name": "VM_PASSWORD",
      "description": "Passwort für VM_USER (ändere das!)",
      "env_variable": "VM_PASSWORD",
      "default_value": "root",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|min:8|max:128"
    },
    {
      "name": "SSH_PUBLIC_KEY",
      "description": "Optionaler SSH Public Key",
      "env_variable": "SSH_PUBLIC_KEY",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:4096"
    },
    {
      "name": "VM_HOSTNAME",
      "description": "Hostname der VM",
      "env_variable": "VM_HOSTNAME",
      "default_value": "vm",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:64"
    },
    {
      "name": "FORWARD_PORTS",
      "description": "Port-Forwards host->guest, z. B. 80->80,443->443 (Ports müssen als Allocations existieren!)",
      "env_variable": "FORWARD_PORTS",
      "default_value": "80,443,22",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:1024"
    },
    {
      "name": "CONSOLE",
      "description": "Konsole: serial (Panel) oder vnc",
      "env_variable": "CONSOLE",
      "default_value": "serial",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:serial,vnc"
    },
    {
      "name": "VNC_DISPLAY",
      "description": "VNC Display (Port=5900+Display), nur wenn CONSOLE=vnc",
      "env_variable": "VNC_DISPLAY",
      "default_value": "0",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|integer|min:0|max:99"
    },
    {
      "name": "SHOW_BANNER",
      "description": "ASCII-Banner beim Install/Start anzeigen (1=an, 0=aus)",
      "env_variable": "SHOW_BANNER",
      "default_value": "1",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:0,1"
    }
  ]
}
